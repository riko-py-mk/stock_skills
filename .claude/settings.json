{
  "env": {
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
  },
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "FILE=$(cat | jq -r '.tool_input.file_path // empty'); if echo \"$FILE\" | grep -q '\\.py$'; then cd /Users/kikuchihiroyuki/stock-skills && python3 -m pytest tests/ -q --tb=no 2>&1 | tail -3; fi",
            "timeout": 30000
          },
          {
            "type": "command",
            "command": "FILE=$(cat | jq -r '.tool_input.file_path // empty'); if echo \"$FILE\" | grep -qE 'src/(core|data)/.*\\.py$'; then echo 'コアモジュール変更: CLAUDE.md / SKILL.md / rules の更新を確認してください'; fi",
            "timeout": 5000
          }
        ]
      }
    ]
  }
}
